(this["webpackJsonppic-search"]=this["webpackJsonppic-search"]||[]).push([[0],{124:function(e,t,a){e.exports=a(225)},129:function(e,t,a){},225:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(3),c=a.n(o),s=(a(129),a(52)),i=a(18),l=a(19),h=a(21),u=a(20),m=a(84),d=a.n(m),g=a(110),f=a(120),p="e13988f0e5bd9eec2f6be3766d85a1b1",v=100,_="imageSearchKey",w=a(121),b={screen_data:function(){return{screen_width:window.innerWidth,screen_height:window.innerHeight,screen_orientation:this.screen_orientation(),screen_type:this.screen_type()}},screen_orientation:function(){return window.matchMedia("(orientation:landscape)").matches?"landscape":"portrait"},screen_type:function(){return window.innerWidth<576?"xs":window.innerWidth<768?"sm":window.innerWidth<992?"md":window.innerWidth<1200?"lg":window.innerWidth<1600?"xl":window.innerWidth<2560?"xxl":"xxxl"},deviceStatus:function(){return Object(w.a)({},this.screen_data())}},y=function(e){switch(e){case"xs":return["c1"];case"sm":return["c1","c2"];case"md":return["c1","c2","c3"];case"lg":case"xl":case"xxl":case"xxxl":return["c1","c2","c3","c4"];default:return["c1"]}},x=function(e,t){var a=localStorage.getItem(e);return a&&void 0!==a?JSON.parse(a):t},k=(a(146),a(45)),E=a(46),S=a(118),j=a(119),C=a(86),O=(a(65),a(66),a(149),a(152),a(226),S.a.Search),I=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.search_text,n=e.show_search_overlay,o=e.search_keys,c=e.onSearch,s=e.onChange,i=e.onClickSearchKey;return r.a.createElement("div",{className:"sai-fixed sai-t-0 sai-l-0 sai-r-0 sai-bg-header sai-box-shadow sai-overflow-y-hidden",style:{height:"".concat(v,"px")}},r.a.createElement(k.a,null,r.a.createElement(E.a,{xs:{span:20,offset:2},sm:{span:12,offset:6},md:{span:8,offset:8},className:"sai-t-pad-10"},r.a.createElement("h1",{className:"sai-font-bold sai-text-center sai-font-white sai-b-mrgn-10"},t),r.a.createElement(j.a,{visible:n,overlay:r.a.createElement(C.a,null,o.map((function(e,t){return r.a.createElement(C.a.Item,{key:t,onClick:function(){return i(e)}},e)})))},r.a.createElement(O,{placeholder:"Type to search photos",value:a,onSearch:c,onChange:s})))))}}]),a}(r.a.PureComponent),N=function(){return r.a.createElement("div",{className:"sai-fixed sai-b-0 sai-l-0 sai-r-0 sai-pad-10 sai-text-center sai-bg-header sai-box-shadow sai-font-white"},"Created by Vivek Vaibhav")},T=a(117),L=(a(223),function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).onClickCard=function(){var t=e.props,a=t.img_data;(0,t.onClick)(a)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.img_data;return r.a.createElement("div",{className:"sai-pad-5 sai-bg-white sai-box-shadow-light sai-border-radius-3",onClick:this.onClickCard},r.a.createElement("div",{className:"sai-card-loading"},r.a.createElement("img",{className:"sai-full-width",src:e.url,alt:"",style:{minHeight:"150px"}})))}}]),a}(r.a.PureComponent));L.defaultProps={img_data:{}};var M=L,W=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(l.a)(a,[{key:"componentDidCatch",value:function(e,t){console.log("error",e),console.log("errorInfo",t),this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?null:e}}]),a}(r.a.Component),D=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).showImageInModal=function(e){n.setState({show_modal:!0,selected_image_data:e})},n.closeModal=function(){n.setState({show_modal:!1,selected_image_data:null})},n.renderAlbumColumns=function(){var e=n.props,t=e.columns,a=e.images;return t.map((function(e,o){return r.a.createElement(E.a,{key:e,xs:24,sm:12,md:8,lg:6},a.map((function(a,c){return c%t.length===o?r.a.createElement(W,{key:"".concat(e).concat(c).concat(a.id)},r.a.createElement("div",{className:"sai-pad-5"},r.a.createElement(M,{img_data:a,onClick:n.showImageInModal}))):null})))}))},n.state={show_modal:!1,selected_image_data:null},n}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.show_modal,a=e.selected_image_data;return r.a.createElement(k.a,null,this.renderAlbumColumns(),r.a.createElement(T.a,{className:"sai-modal",visible:t,title:null,footer:null,maskClosable:!1,onCancel:this.closeModal},t&&r.a.createElement(M,{img_data:a})))}}]),a}(r.a.PureComponent);D.defaultProps={images:[]};var P=D,B=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.count;return r.a.createElement(k.a,null,e.map((function(e){return r.a.createElement(E.a,{key:e,xs:24,sm:12,md:8,lg:6},r.a.createElement("div",{className:"sai-pad-5"},r.a.createElement("div",{className:"sai-bg-white sai-pad-5 sai-box-shadow-light sai-border-radius-3"},r.a.createElement("div",{className:"sai-card-loading",style:{height:"150px"}}))))})))}}]),a}(r.a.PureComponent);B.defaultProps={count:[1,2,3,4]};var K=B,R=function(e){Object(h.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).startLoading=function(){n.setState({loading:!0})},n.stopLoading=function(){n.setState({loading:!1})},n.showMessage=function(e,t){(0,f.a[e])(t)},n.setDeviceData=function(){clearTimeout(n.timeout),n.timeout=setTimeout((function(){var e=b.deviceStatus();n.setState({device_data:e,columns:y(e.screen_type)})}),300)},n.fetchRecentImages=function(e){var t=n.state.next_page;d()({method:"GET",url:"https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=".concat(p,"&per_page=").concat(10,"&page=").concat(t,"&format=json&nojsoncallback=1&safe_search=2"),validateStatus:function(e){return e>=200&&e<300||412===e}}).then((function(a){if(e&&e(),a.data.photos&&a.data.photos.photo){var r=n.convertInImagesList(a.data.photos.photo);n.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(r)),has_more_images:10===a.data.photos.photo.length,next_page:t+1}}))}})).catch((function(e){n.showMessage("error","unable to fetch images, something went wrong")}))},n.fetchImagesBySearchTag=function(e,t){var a=n.state.next_page;d()({method:"GET",url:"https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=".concat(p,"&tags=").concat(e,"&per_page=").concat(10,"&page=").concat(a,"&format=json&nojsoncallback=1&safe_search=2"),validateStatus:function(e){return e>=200&&e<300||412===e}}).then((function(e){if(t&&t(),e.data.photos&&e.data.photos.photo){var r=n.convertInImagesList(e.data.photos.photo);n.setState((function(t){return{images:[].concat(Object(s.a)(t.images),Object(s.a)(r)),has_more_images:10===e.data.photos.photo.length,next_page:a+1}}))}})).catch((function(e){n.showMessage("error","unable to fetch images, something went wrong")}))},n.convertInImagesList=function(e){for(var t,a=[],n=0;n<e.length;n++)if(e[n].id){var r={id:e[n].id,url:(t=e[n],"https://farm".concat(t.farm,".staticflickr.com/").concat(t.server,"/").concat(t.id,"_").concat(t.secret,".jpg"))};a.push(r)}return a},n.onImageSearch=function(e){n.setState({loading:!0,images:[],next_page:1,has_more_images:!0,show_search_overlay:!1},(function(){if(e&&e.trim().length>0){n.fetchImagesBySearchTag(e,n.stopLoading);var t=x(_,[]);-1===t.findIndex((function(t){return t===e}))&&(t.length>=10&&(t=t.slice(1)),t.push(e),function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)}(_,t))}else n.fetchRecentImages(n.stopLoading)}))},n.onChangeSearchText=function(e){var t,a=e.target.value,r=x(_,[]),o=(t=a,r.filter((function(e){return e&&void 0!==e&&0===e.toLowerCase().indexOf(t.toLowerCase())})));n.setState({search_text:a,search_keys:o,show_search_overlay:0!==o.length},(function(){n.debouncedImageSearch(a)}))},n.onClickSearchKey=function(e){0!==e&&n.setState({search_text:e,loading:!0,images:[],next_page:1,has_more_images:!0,show_search_overlay:!1},(function(){n.fetchImagesBySearchTag(e,n.stopLoading)}))},n.fetchMoreImages=function(){var e=n.state.search_text;0===e.length?n.fetchRecentImages():n.fetchImagesBySearchTag(e)},n.state={images:[],device_data:b.deviceStatus(),columns:y(b.deviceStatus().screen_type),search_text:"",next_page:1,has_more_images:!0,loading:!1,show_search_overlay:!1,search_keys:x(_,[])},n.debouncedImageSearch=function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];a&&clearTimeout(a),a=setTimeout((function(){e.apply(void 0,r),a=null}),t)}}(n.onImageSearch,1e3),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setDeviceData),this.startLoading(),this.fetchRecentImages(this.stopLoading)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setDeviceData)}},{key:"render",value:function(){var e=this.state,t=e.columns,a=e.images,n=e.search_text,o=e.has_more_images,c=e.show_search_overlay,s=e.search_keys,i=e.loading;return r.a.createElement("div",{style:{paddingTop:"".concat(v,"px")}},r.a.createElement(I,{title:"PicSearch",search_text:n,show_search_overlay:c,onClickSearchKey:this.onClickSearchKey,search_keys:s,onSearch:this.onImageSearch,onChange:this.onChangeSearchText}),r.a.createElement("div",{id:"albumContainer",className:"sai-overflow-y-auto sai-pad-5",style:{height:"calc(100vh - ".concat(v,"px)")}},i?r.a.createElement(K,{count:[1,2,3,4,5,6,7,8,9,10]}):r.a.createElement(g.a,{scrollableTarget:"albumContainer",dataLength:a.length,hasMore:o,loader:r.a.createElement(K,null),endMessage:r.a.createElement("div",{className:"sai-text-center sai-pad-10"},r.a.createElement("b",null,"Yay! You have seen it all")),scrollThreshold:.8,next:this.fetchMoreImages},r.a.createElement(P,{columns:t,images:a}))),r.a.createElement(N,null))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(R,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[124,1,2]]]);
//# sourceMappingURL=main.e6f6bf76.chunk.js.map