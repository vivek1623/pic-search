(this["webpackJsonpsupply-ai-album"]=this["webpackJsonpsupply-ai-album"]||[]).push([[0],{125:function(e,t,a){e.exports=a(224)},130:function(e,t,a){},224:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(3),c=a.n(r),s=(a(130),a(53)),i=a(18),l=a(19),h=a(21),u=a(20),m=a(22),d=a(60),g=a.n(d),f=a(111),p=a(121),v="4adabc18bb64a9030673bce2524d6ed5",_=10,w=100,b={SEARCH_KEY:"imageSearchKey"},y=a(122),E={screen_data:function(){return{screen_width:window.innerWidth,screen_height:window.innerHeight,screen_orientation:this.screen_orientation(),screen_type:this.screen_type()}},screen_orientation:function(){return window.matchMedia("(orientation:landscape)").matches?"landscape":"portrait"},screen_type:function(){return window.innerWidth<576?"xs":window.innerWidth<768?"sm":window.innerWidth<992?"md":window.innerWidth<1200?"lg":window.innerWidth<1600?"xl":window.innerWidth<2560?"xxl":"xxxl"},deviceStatus:function(){return Object(y.a)({},this.screen_data())}},x=function(e){switch(e){case"xs":return["c1"];case"sm":return["c1","c2"];case"md":return["c1","c2","c3"];case"lg":case"xl":case"xxl":case"xxxl":return["c1","c2","c3","c4"];default:return["c1"]}},S=function(e){return"https://farm".concat(e.farm,".staticflickr.com/").concat(e.server,"/").concat(e.id,"_").concat(e.secret,".jpg")},k=function(e,t){var a=localStorage.getItem(e);return a&&void 0!==a?JSON.parse(a):t},j=function(e,t){var a=JSON.stringify(t);localStorage.setItem(e,a)},O=function(e,t){return t.filter((function(t){return t&&void 0!==t&&0===t.toLowerCase().indexOf(e.toLowerCase())}))},C=(a(147),a(46)),I=a(48),L=a(119),N=a(120),T=a(87),M=(a(67),a(68),a(150),a(153),a(225),L.a.Search),K=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.title,a=e.search_text,n=e.show_search_overlay,r=e.search_keys,c=e.onSearch,s=e.onChange,i=e.onClickSearchKey;return o.a.createElement("div",{className:"sai-fixed sai-t-0 sai-l-0 sai-r-0 sai-bg-header sai-box-shadow sai-overflow-y-hidden",style:{height:"".concat(w,"px")}},o.a.createElement(C.a,null,o.a.createElement(I.a,{xs:{span:20,offset:2},sm:{span:12,offset:6},md:{span:8,offset:8},className:"sai-t-pad-10"},o.a.createElement("h2",{className:"sai-font-bold sai-text-center sai-font-white sai-b-mrgn-10"},t),o.a.createElement(N.a,{visible:n,overlay:o.a.createElement(T.a,null,r.map((function(e,t){return o.a.createElement(T.a.Item,{key:t,onClick:function(){return i(e)}},e)})))},o.a.createElement(M,{placeholder:"Type to search photos",value:a,onSearch:c,onChange:s})))))}}]),t}(o.a.PureComponent),R=a(118),W=(a(222),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).onClickCard=function(){var e=a.props,t=e.img_data;(0,e.onClick)(t)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.img_data;return o.a.createElement("div",{className:"sai-pad-5 sai-bg-white sai-box-shadow-light sai-border-radius-3",onClick:this.onClickCard},o.a.createElement("div",{className:"sai-card-loading"},o.a.createElement("img",{className:"sai-full-width",src:e.url,alt:"",style:{minHeight:"150px"}})))}}]),t}(o.a.PureComponent));W.defaultProps={img_data:{}};var A=W,D=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).state={hasError:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log("error",e),console.log("errorInfo",t),this.setState({hasError:!0})}},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?null:e}}]),t}(o.a.Component),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(h.a)(this,Object(u.a)(t).call(this,e))).showImageInModal=function(e){a.setState({show_modal:!0,selected_image_data:e})},a.closeModal=function(){a.setState({show_modal:!1,selected_image_data:null})},a.renderAlbumColumns=function(){var e=a.props,t=e.columns,n=e.images;return t.map((function(e,r){return o.a.createElement(I.a,{key:e,xs:24,sm:12,md:8,lg:6},n.map((function(n,c){return c%t.length===r?o.a.createElement(D,{key:"".concat(e).concat(c).concat(n.id)},o.a.createElement("div",{className:"sai-pad-5"},o.a.createElement(A,{img_data:n,onClick:a.showImageInModal}))):null})))}))},a.state={show_modal:!1,selected_image_data:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.show_modal,a=e.selected_image_data;return o.a.createElement(C.a,null,this.renderAlbumColumns(),o.a.createElement(R.a,{className:"sai-modal",visible:t,title:null,footer:null,maskClosable:!1,onCancel:this.closeModal},t&&o.a.createElement(A,{img_data:a})))}}]),t}(o.a.PureComponent);P.defaultProps={images:[]};var H=P,Y=function(e){function t(){return Object(i.a)(this,t),Object(h.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.count;return o.a.createElement(C.a,null,e.map((function(e){return o.a.createElement(I.a,{key:e,xs:24,sm:12,md:8,lg:6},o.a.createElement("div",{className:"sai-pad-5"},o.a.createElement("div",{className:"sai-bg-white sai-pad-5 sai-box-shadow-light sai-border-radius-3"},o.a.createElement("div",{className:"sai-card-loading",style:{height:"150px"}}))))})))}}]),t}(o.a.PureComponent);Y.defaultProps={count:[1,2,3,4]};var B=Y,J=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(h.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={images:[],device_data:E.deviceStatus(),columns:x(E.deviceStatus().screen_type),search_text:"",next_page:1,has_more_images:!0,loading:!1,show_search_overlay:!1,search_keys:k(b.SEARCH_KEY,[])},a.startLoading=function(){a.setState({loading:!0})},a.stopLoading=function(){a.setState({loading:!1})},a.showMessage=function(e,t){(0,p.a[e])(t)},a.setDeviceData=function(){clearTimeout(a.timeout),a.timeout=setTimeout((function(){var e=E.deviceStatus();a.setState({device_data:e,columns:x(e.screen_type)})}),300)},a.fetchRecentImages=function(e){var t=a.state.next_page;g()({method:"GET",url:"https://www.flickr.com/services/rest/?method=flickr.photos.getRecent&api_key=".concat(v,"&per_page=").concat(_,"&page=").concat(t,"&format=json&nojsoncallback=1"),validateStatus:function(e){return e>=200&&e<300||412===e}}).then((function(n){if(e&&e(),n.data.photos&&n.data.photos.photo){var o=a.convertInImagesList(n.data.photos.photo);a.setState((function(e){return{images:[].concat(Object(s.a)(e.images),Object(s.a)(o)),has_more_images:n.data.photos.photo.length===_,next_page:t+1}}))}})).catch((function(e){a.showMessage("error","unable to fetch images, something went wrong")}))},a.fetchImagesBySearchTag=function(e,t){var n=a.state.next_page;g()({method:"GET",url:"https://www.flickr.com/services/rest/?method=flickr.photos.search&api_key=".concat(v,"&tags=").concat(e,"&per_page=").concat(_,"&page=").concat(n,"&format=json&nojsoncallback=1"),validateStatus:function(e){return e>=200&&e<300||412===e}}).then((function(e){if(t&&t(),e.data.photos&&e.data.photos.photo){var o=a.convertInImagesList(e.data.photos.photo);a.setState((function(t){return{images:[].concat(Object(s.a)(t.images),Object(s.a)(o)),has_more_images:e.data.photos.photo.length===_,next_page:n+1}}))}})).catch((function(e){a.showMessage("error","unable to fetch images, something went wrong")}))},a.convertInImagesList=function(e){for(var t=[],a=0;a<e.length;a++)if(e[a].id){var n={id:e[a].id,url:S(e[a])};t.push(n)}return t},a.onImageSearch=function(e){a.setState({loading:!0,images:[],next_page:1,has_more_images:!0,show_search_overlay:!1},(function(){if(e.length>0){a.fetchImagesBySearchTag(e,a.stopLoading);var t=k(b.SEARCH_KEY,[]);-1===t.findIndex((function(t){return t===e}))&&(t.push(e),j(b.SEARCH_KEY,t))}}))},a.onChangeSearchText=function(e){var t=e.target.value;if(0===t.length)a.setState({search_text:t,loading:!0,images:[],next_page:1,has_more_images:!0,show_search_overlay:!1},(function(){a.fetchRecentImages(a.stopLoading)}));else{var n=k(b.SEARCH_KEY,[]),o=O(t,n);a.setState({search_text:t,search_keys:o,show_search_overlay:0!==o.length})}},a.onClickSearchKey=function(e){0!==e&&a.setState({search_text:e,loading:!0,images:[],next_page:1,has_more_images:!0,show_search_overlay:!1},(function(){a.fetchImagesBySearchTag(e,a.stopLoading)}))},a.fetchMoreImages=function(){var e=a.state.search_text;0===e.length?a.fetchRecentImages():a.fetchImagesBySearchTag(e)},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.setDeviceData),this.startLoading(),this.fetchRecentImages(this.stopLoading)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.setDeviceData)}},{key:"render",value:function(){var e=this.state,t=e.columns,a=e.images,n=e.search_text,r=e.has_more_images,c=e.show_search_overlay,s=e.search_keys,i=e.loading;return o.a.createElement("div",{style:{paddingTop:"".concat(w,"px")}},o.a.createElement(K,{title:"Search Photos",search_text:n,show_search_overlay:c,onClickSearchKey:this.onClickSearchKey,search_keys:s,onSearch:this.onImageSearch,onChange:this.onChangeSearchText}),o.a.createElement("div",{id:"albumContainer",className:"sai-overflow-y-auto sai-pad-5",style:{height:"calc(100vh - ".concat(w,"px)")}},i?o.a.createElement(B,{count:[1,2,3,4,5,6,7,8,9,10]}):o.a.createElement(f.a,{scrollableTarget:"albumContainer",dataLength:a.length,hasMore:r,loader:o.a.createElement(B,null),endMessage:o.a.createElement("div",{className:"sai-text-center sai-pad-10"},o.a.createElement("b",null,"Yay! You have seen it all")),scrollThreshold:.9,next:this.fetchMoreImages},o.a.createElement(H,{columns:t,images:a}))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[125,1,2]]]);
//# sourceMappingURL=main.7bd294fd.chunk.js.map